<Page xmlns="http://schemas.nativescript.org/tns.xsd"
  navigatingTo="pageNavigatingTo" actionBarHidden="true">

  <GridLayout rows="auto, *" swipe="backSwipe">
    <!-- HEADER -->
    <GridLayout rows="auto, auto" class="page-header">
      
      <GridLayout class="action-bar" colSpan="2">
        <StackLayout tap="backTap" orientation="horizontal" class="action-wrap" horizontalAlignment="left">
          <Image stretch="none" class="icon-image" src="res://ic_arrow_back"/>
          <Label text="Back" class="back-text" />
        </StackLayout>
        <Label text="Teams" class="action-bar-title" />

        <StackLayout orientation="horizontal" horizontalAlignment="right">
          <!-- ToDo: Make here a link to the team page when it is a verslag -->
          <GridLayout class="action-wrap" tap="showMapTap" columns="auto" horizontalAlignment="right"  visibility="{{ team ? 'visible' : 'collapsed' }}">
            <Image stretch="none" class="icon-image" src="res://ic_map"/>
          </GridLayout>

          <GridLayout class="action-wrap" tap="shareTap" columns="auto" horizontalAlignment="right">
            <Image stretch="none" class="icon-image" src="res://ic_share"/>
          </GridLayout>
        </StackLayout>
  
      </GridLayout>

      <!-- Tabs Team Type -->
      <GridLayout row="1" class="darker">
        <SegmentedBar selectedBackgroundColor="#00acf6" selectedIndex="{{ selectedTeamIndex }}">
          <SegmentedBar.items>
            <SegmentedBarItem title="Team info" />
            <SegmentedBarItem title="Programma" />
            <SegmentedBarItem title="Verslagen" />
          </SegmentedBar.items>
        </SegmentedBar>
      </GridLayout>


    </GridLayout>

    <!-- Team Info -->
    <ScrollView row="1" id="scroll" visibility="{{ selectedTeamIndex === 0 ? 'visible' : 'collapsed'}}">
    
      <StackLayout>
      
       <StackLayout>
            <Image id="news-image" src="{{ team.image.secure_url }}" />  
        </StackLayout>
      

        <StackLayout class="content-container" >
            <Label text="{{ team.name }}" textWrap="true" class="page-title" />
            <Label text="{{ team.klasse }}" textWrap="true" class="info-smaller" />

            <StackLayout visibility="{{ team.trainers ? 'visible' : 'collapsed'}}" class="l-mt-1 l-mb-1">
                
                <Label text="Trainers" class="info" /> 
                          
                <GridLayout rows="*">

                    <ListView items="{{ team.trainers }}" separatorColor="#dddddd">
                        <ListView.itemTemplate>

                        <GridLayout columns="auto, *" rows="60">

                            <GridLayout col="0">
                                <Image stretch="aspectFit" class="person-image-thumb" src="{{ photo.secure_url }}" visibility="{{ photo.secure_url ? 'visible' : 'collapsed' }}" />
                                <Image stretch="aspectFit" class="person-image-thumb" src="~/images/image-placeholder.png" visibility="{{ !photo.secure_url ? 'visible' : 'collapsed' }}" />
                            </GridLayout>

                            <GridLayout col="1" row="1" rows="auto, auto" columns="*, *" class="info-smaller">
                            
                                <Label row="0" col="0" text="{{ name.first }}" class="l-mr-1" />
                                <Label row="0" col="1" text="{{ name.last }}" />
                                <Label row="1" col="0" text="{{ email }}" class="l-mr-1" />
                                <Label row="1" col="1" text="{{ phone }}" />

                            </GridLayout>
                                            
                        </GridLayout>


                        </ListView.itemTemplate>
                    </ListView>

                </GridLayout> 
            </StackLayout>
 
 
             <GridLayout visibility="{{ team.leiders ? 'visible' : 'collapsed'}}" class="l-mt-1 l-mb-1">
                
                <Label text="Leiders" class="info" /> 
                          
                <GridLayout rows="*">

                    <ListView items="{{ team.leiders }}" separatorColor="#dddddd">
                        <ListView.itemTemplate>

                        <GridLayout columns="auto, *" rows="60">

                            <GridLayout col="0">
                                <Image stretch="aspectFit" class="person-image-thumb" src="{{ photo.secure_url }}" visibility="{{ photo.secure_url ? 'visible' : 'collapsed' }}" />
                                <Image stretch="aspectFit" class="person-image-thumb" src="~/images/image-placeholder.png" visibility="{{ !photo.secure_url ? 'visible' : 'collapsed' }}" />
                            </GridLayout>

                            <GridLayout col="1" row="0" rows="auto, auto" columns="*, *" class="info-smaller">
                            
                                <Label row="0" col="0" text="{{ name.first }}" class="l-mr-1" />
                                <Label row="0" col="1" text="{{ name.last }}" />
                                <Label row="1" col="0" text="{{ email }}" class="l-mr-1" />
                                <Label row="1" col="1" text="{{ phone }}" />

                            </GridLayout>
                                            
                        </GridLayout>

                        </ListView.itemTemplate>
                    </ListView>

                </GridLayout> 
            </GridLayout>
 
            <Label text="Spelers" class="info" />           
            <HtmlView html="{{ team.spelers }}" />
            
            <Label text="Overige informatie" class="info" />           
            <HtmlView html="{{ team.content.extended }}" />

            <StackLayout visibility="{{ team.sponsors ? 'visible' : 'collapsed'}}">            
              <Label text="Sponsors" class="info" />           
              <HtmlView html="{{ team.sponsors }}" />
            </StackLayout>
            
            <!-- Content -->

            <Button class="button share-button material-icon l-p-1" tap="shareButtonTap" text="&#xf35b; Deel dit bericht" />

        </StackLayout>
      </StackLayout>
    </ScrollView>
    
     <!-- Programma Info -->
    <ScrollView row="1" id="scroll" visibility="{{ selectedTeamIndex === 1 ? 'visible' : 'collapsed'}}">
    
      <StackLayout>
      
        <StackLayout class="content-container" >
            <Label text="Programma en uitslagen" textWrap="true" class="page-title" />
            
            <!-- Content -->

            <Button class="button share-button material-icon l-p-1" tap="shareButtonTap" text="&#xf35b; Deel dit bericht" />

        </StackLayout>
      </StackLayout>
    </ScrollView>

     <!-- Programma Info -->
    <ScrollView row="1" id="scroll" visibility="{{ selectedTeamIndex === 2 ? 'visible' : 'collapsed'}}">
    
      <StackLayout>
      
        <StackLayout class="content-container" >
            <Label text="Verslagen" textWrap="true" class="page-title" />
            
            <!-- Content -->

            <Button class="button share-button material-icon l-p-1" tap="shareButtonTap" text="&#xf35b; Deel dit bericht" />

        </StackLayout>
      </StackLayout>
    </ScrollView>

    
  </GridLayout>
</Page>